import{_ as p}from"./index.b0fcde14.js";import{r as u,o,g as c,h as r,i as _,t as d,j as f,k as v,n as g,F as $,l as y,m as C,w as x}from"./vendor.f6a25964.js";const k={props:{title:{type:String,default:"",reuquired:!0},rightVal:{type:String,default:"",reuquired:!1}},setup(e,i){return{rightClick:function(){i.emit("rightClick")}}}},H={class:"headers"},S={class:"left"},V={class:"center"};function D(e,i,n,a,l,s){const t=u("van-icon");return o(),c("div",H,[r("div",S,[_(e.$slots,"left",{},()=>[f(t,{name:"arrow-left"})],!0)]),r("div",V,d(n.title),1),r("div",{class:"right",onClick:i[0]||(i[0]=(...h)=>a.rightClick&&a.rightClick(...h))},[_(e.$slots,"right",{},()=>[v(d(n.rightVal),1)],!0)])])}var z=p(k,[["render",D],["__scopeId","data-v-0d2e70d0"]]);const b={name:"VirtualList",props:{listData:{type:Array,default:()=>[]}},computed:{listHeight(){return this.listData.length*this.itemSize},visibleCount(){return Math.ceil(this.screenHeight/this.itemSize)+1},getTransform(){return`translateY(${this.startOffset}px)`},visibleData(){return this.listData.slice(this.start,Math.min(this.end,this.listData.length))},end(){return this.start+this.visibleCount}},mounted(){this.screenHeight=this.$el.clientHeight,this.start=0,this.$nextTick(()=>{this.itemSize=this.$refs.items[0].clientHeight,console.log(this.$refs.items[0].clientHeight,"123")})},data(){return{screenHeight:0,startOffset:0,start:0,itemSize:0}},methods:{scrollEvent(){let e=this.$refs.list.scrollTop;this.start=Math.floor(e/this.itemSize),this.startOffset=e-e%this.itemSize}}};function L(e,i,n,a,l,s){return o(),c("div",{ref:"list",class:"infinite-list-container",onScroll:i[0]||(i[0]=t=>s.scrollEvent(t))},[r("div",{class:"infinite-list-phantom",style:g({height:s.listHeight+"px"})},null,4),r("div",{class:"infinite-list",style:g({transform:s.getTransform})},[(o(!0),c($,null,y(s.visibleData,t=>(o(),c("div",{ref_for:!0,ref:"items",class:"infinite-list-item",key:t.id},[r("div",null,d(t.value),1),_(e.$slots,"default",{item:t},void 0,!0)]))),128))],4)],544)}var T=p(b,[["render",L],["__scopeId","data-v-2230031b"]]);const I=defineComponent({components:{Header:z,VirtualList:T},setup(e,i){var s;console.log(e,i,"context");const n=(s=getCurrentInstance())==null?void 0:s.appContext.config.globalProperties.$http,a=function(){n.get("/api/v1/topics").then(t=>{console.log(t)}).catch(t=>{console.log(t)})},l=C([]);for(let t=0;t<500;t++)l.push({id:t,value:`\u6211\u662F${t}\u53F7`});return{next:a,d:l}}}),w={class:"home"},B={class:"mains"};function E(e,i,n,a,l,s){const t=u("Header"),h=u("VirtualList");return o(),c("div",w,[f(t,{title:"\u6211\u7684\u4E3B\u9875",rightVal:"\u5206\u4EAB",onRightClick:e.next},null,8,["onRightClick"]),r("div",B,[f(h,{listData:e.d},{default:x(m=>[r("div",null," \u4F5C\u7528\u57DF\u63D2\u69FD"+d(m.item.id),1)]),_:1},8,["listData"])])])}var O=p(I,[["render",E],["__scopeId","data-v-336d98c9"]]);export{O as default};
