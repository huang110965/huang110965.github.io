import{_ as p}from"./index-9060b0ef.js";import{R as u,U as l,V as o,W as a,X as c,Y as d,h as _,Z as g,_ as f,F as v,$,d as y}from"./@vue-f15130df.js";import"./vue-global-api-e1794dd6.js";import"./vue-router-f80ef117.js";import"./vant-6fc94e29.js";import"./@vant-8fbdbed4.js";import"./axios-aec7d438.js";import"./vconsole-a65d629e.js";import"./amfe-flexible-1f7bb7f4.js";const C={props:{title:{type:String,default:"",reuquired:!0},rightVal:{type:String,default:"",reuquired:!1}},setup(t,e){return{rightClick:function(){e.emit("rightClick")}}}},D={class:"headers"},S={class:"left"},H={class:"center"};function x(t,e,r,i,m,n){const s=u("van-icon");return l(),o("div",D,[a("div",S,[c(t.$slots,"left",{},()=>[_(s,{name:"arrow-left"})],!0)]),a("div",H,d(r.title),1),a("div",{class:"right",onClick:e[0]||(e[0]=(...h)=>i.rightClick&&i.rightClick(...h))},[c(t.$slots,"right",{},()=>[g(d(r.rightVal),1)],!0)])])}var V=p(C,[["render",x],["__scopeId","data-v-0d2e70d0"]]);const k={name:"VirtualList",props:{listData:{type:Array,default:()=>[]}},computed:{listHeight(){return this.listData.length*this.itemSize},visibleCount(){return Math.ceil(this.screenHeight/this.itemSize)+1},getTransform(){return`translateY(${this.startOffset}px)`},visibleData(){return console.log(this.listData,"listData"),this.listData.slice(this.start,Math.min(this.end,this.listData.length))},end(){return this.start+this.visibleCount}},watch:{listData:{handler(){var t;this.screenHeight=(t=this.$el)==null?void 0:t.clientHeight,this.start=0,this.$nextTick(()=>{var e;this.itemSize=(e=this.$refs.items)==null?void 0:e[0].clientHeight})},deep:!0,immediate:!0}},mounted(){var t;this.screenHeight=(t=this.$el)==null?void 0:t.clientHeight,this.start=0,this.$nextTick(()=>{var e;this.itemSize=(e=this.$refs.items)==null?void 0:e[0].clientHeight})},data(){return{screenHeight:0,startOffset:0,start:0,itemSize:0}},methods:{scrollEvent(){let t=this.$refs.list.scrollTop;this.start=Math.floor(t/this.itemSize),this.startOffset=t-t%this.itemSize}}};function z(t,e,r,i,m,n){return l(),o("div",{ref:"list",class:"infinite-list-container",onScroll:e[0]||(e[0]=s=>n.scrollEvent(s))},[a("div",{class:"infinite-list-phantom",style:f({height:n.listHeight+"px"})},null,4),a("div",{class:"infinite-list",style:f({transform:n.getTransform})},[(l(!0),o(v,null,$(n.visibleData,s=>(l(),o("div",{ref_for:!0,ref:"items",class:"infinite-list-item",key:s.id},[a("div",null,d(s.CitySort),1),a("div",null,d(s.CityName),1),c(t.$slots,"default",{},void 0,!0),c(t.$slots,"name",{},void 0,!0)]))),128))],4)],544)}var T=p(k,[["render",z],["__scopeId","data-v-04266e1a"]]);const b=defineComponent({components:{Header:V,VirtualList:T},setup(t,e){console.log(t,e,"context"),getCurrentInstance().appContext.config.globalProperties.$http;let r=y({listData:[]});for(let i=0;i<500;i++)r.listData.push({CitySort:i,CityName:`\u57CE\u5E02${i}`});return{data:r}}}),L={class:"home"},N={class:"mains"};function I(t,e,r,i,m,n){const s=u("Header"),h=u("VirtualList");return l(),o("div",L,[_(s,{title:"\u6211\u7684\u4E3B\u9875",rightVal:"\u70B9\u6211"}),a("div",N,[_(h,{listData:t.data.listData},null,8,["listData"])])])}var P=p(b,[["render",I],["__scopeId","data-v-85c864b4"]]);export{P as default};
